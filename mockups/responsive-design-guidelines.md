# レスポンシブデザイン指針
## 管理特化型CRMシステム

**文書バージョン**: 1.0  
**作成日**: 2025-01-27  
**対象**: Webアプリケーション（PC・タブレット・スマートフォン対応）

---

## 1. 基本方針

### 1.1 デザインコンセプト
- **PC優先設計**: 業務効率を重視したデスクトップファーストアプローチ
- **情報密度重視**: 限られた画面スペースに最大限の情報を表示
- **操作効率**: マウス・キーボード操作の最適化を優先
- **モバイル対応**: 外出先での閲覧・軽微な操作をサポート

### 1.2 ユーザー利用シーン
- **デスクトップ (85%)**: 社内での本格的な業務作業
- **タブレット (10%)**: 会議室・打ち合わせでの情報確認
- **スマートフォン (5%)**: 外出先での緊急確認・軽微な更新

---

## 2. ブレークポイント設計

### 2.1 ブレークポイント定義
```css
/* デスクトップ（メイン対象） */
@media (min-width: 1200px) {
  /* フル機能表示 */
}

/* タブレット（横向き含む） */
@media (min-width: 768px) and (max-width: 1199px) {
  /* 機能制限なし、レイアウト調整 */
}

/* スマートフォン */
@media (max-width: 767px) {
  /* 必要最小限の機能、縦スクロール重視 */
}

/* 大画面デスクトップ */
@media (min-width: 1440px) {
  /* より多くの情報を並列表示 */
}
```

### 2.2 デバイス別表示方針

#### 🖥️ デスクトップ (1200px以上)
- **レイアウト**: サイドナビ + メインコンテンツの2カラム
- **情報密度**: 最大（テーブル表示、複数カード並列）
- **ナビゲーション**: サイドナビ常時表示
- **機能制限**: なし（全機能利用可能）

#### 📱 タブレット (768px-1199px)
- **レイアウト**: サイドナビ折りたたみ + メインコンテンツ
- **情報密度**: 高（一部カード縦積み）
- **ナビゲーション**: オーバーレイサイドナビ
- **機能制限**: 軽微（一部操作の簡素化）

#### 📱 スマートフォン (767px以下)
- **レイアウト**: 単一カラム、縦スクロール重視
- **情報密度**: 低（カード形式、必要最小限の情報）
- **ナビゲーション**: ハンバーガーメニュー + ボトムナビ
- **機能制限**: 中程度（閲覧中心、編集は簡素化）

---

## 3. デバイス別機能対応表

### 3.1 機能別対応レベル
| 機能                 | デスクトップ | タブレット | スマートフォン |
|---------------------|-------------|-----------|---------------|
| **企業情報閲覧**     | ◎ フル表示   | ○ 制限なし | ○ カード表示   |
| **企業情報編集**     | ◎ フル機能   | ○ 制限なし | △ 簡易版      |
| **メール履歴表示**   | ◎ フル機能   | ○ 制限なし | ○ リスト表示   |
| **TODO管理**        | ◎ フル機能   | ○ 制限なし | ○ リスト表示   |
| **検索・フィルタ**   | ◎ 高度検索   | ○ 制限なし | ○ 基本検索     |
| **データインポート** | ◎ フル機能   | △ 制限付き | × 非対応       |
| **エクスポート**     | ◎ フル機能   | ○ 制限なし | △ 簡易版      |
| **システム管理**     | ◎ フル機能   | △ 制限付き | × 非対応       |
| **商材管理**         | ◎ フル機能   | ○ 制限なし | ○ 閲覧のみ     |

### 3.2 対応レベル説明
- **◎ フル機能**: 全機能利用可能、最適化済み
- **○ 制限なし**: 機能制限なし、レイアウト調整のみ
- **△ 制限付き**: 一部機能制限または簡素化
- **× 非対応**: 当該デバイスでは利用不可

---

## 4. レイアウト変更パターン

### 4.1 ナビゲーション変更

#### デスクトップ → タブレット
```
Before (Desktop)               After (Tablet)
┌─────┬─────────────────┐      ┌──────────────────────┐
│ 📊  │                 │      │ ☰ [ロゴ] [ユーザー]  │
│ 🏢  │   メインコンテンツ│  →   ├──────────────────────┤
│ 📧  │                 │      │                      │
│ 📦  │                 │      │   メインコンテンツ    │
│ ⚙️  │                 │      │                      │
└─────┴─────────────────┘      └──────────────────────┘
```

#### タブレット → スマートフォン
```
Before (Tablet)                After (Mobile)
┌──────────────────────┐      ┌─────────────────┐
│ ☰ [ロゴ] [ユーザー]  │      │ ☰ [ロゴ] [👤]   │
├──────────────────────┤  →   ├─────────────────┤
│                      │      │                 │
│   メインコンテンツ    │      │ メインコンテンツ │
│                      │      │ （縦スクロール） │
└──────────────────────┘      │                 │
                              ├─────────────────┤
                              │[🏠][🔍][📋][👤] │ ← ボトムナビ
                              └─────────────────┘
```

### 4.2 コンテンツレイアウト変更

#### 企業一覧：横並び → 縦積み
```
Desktop (横並び)                Mobile (縦積み)
┌─────────────────────────┐    ┌──────────────────┐
│企業名 │業種│担当│最終連絡│    │ 📊 ○○商事        │
│○○商事│製造│山田│01/25  │→   │ 製造業 | 山田太郎 │
│××工業│IT │佐藤│01/20  │    │ 最終: 01/25      │
└─────────────────────────┘    ├──────────────────┤
                              │ 📊 ××工業        │
                              │ IT業 | 佐藤花子   │
                              │ 最終: 01/20      │
                              └──────────────────┘
```

---

## 5. UIコンポーネント別対応

### 5.1 データテーブル
#### デスクトップ
```
┌─────────────────────────────────────────────────────┐
│☑️│企業名      │担当者│業種    │ステータス│最終連絡│操作│
├─────────────────────────────────────────────────────┤
│☑️│株式会社○○  │山田  │製造業  │既存顧客  │01/25  │📝📧│
│☑️│××工業     │佐藤  │IT     │見込み客  │01/20  │📝📧│
└─────────────────────────────────────────────────────┘
```

#### スマートフォン
```
┌─────────────────────────────────┐
│ 📊 株式会社○○商事               │
│ 製造業 | 既存顧客               │
│ 担当: 山田太郎 | 最終: 01/25     │
│ [📝編集] [📧メール] [詳細 >]     │
├─────────────────────────────────┤
│ 📊 ××工業                      │
│ IT業 | 見込み客                 │
│ 担当: 佐藤花子 | 最終: 01/20     │
│ [📝編集] [📧メール] [詳細 >]     │
└─────────────────────────────────┘
```

### 5.2 フォーム
#### デスクトップ（2カラム）
```
┌─────────────────────────────────┐
│ 会社名: [________________]      │
│ 業種:   [________________]      │
│ 担当者: [________] TEL: [______] │
│ 住所:   [____________________]  │
└─────────────────────────────────┘
```

#### スマートフォン（1カラム）
```
┌─────────────────────┐
│ 会社名:             │
│ [________________]  │
│ 業種:               │
│ [________________]  │
│ 担当者:             │
│ [________________]  │
│ 電話番号:           │
│ [________________]  │
│ 住所:               │
│ [________________]  │
└─────────────────────┘
```

### 5.3 アクションボタン
#### デスクトップ
```
[📝編集] [📧メール送信] [📋TODO作成] [🗑️削除]
```

#### スマートフォン
```
┌─────────────────┐
│ アクション      │
├─────────────────┤
│ 📝 編集         │
│ 📧 メール送信    │
│ 📋 TODO作成     │
│ 🗑️ 削除        │
└─────────────────┘
```

---

## 6. タッチ・操作対応

### 6.1 タッチターゲットサイズ
```css
/* 最小タッチターゲット（iOS Human Interface Guidelines準拠） */
.touch-target {
  min-height: 44px;  /* 最小タッチサイズ */
  min-width: 44px;
  padding: 8px 12px;
}

/* モバイル専用の大きめボタン */
@media (max-width: 767px) {
  .button {
    min-height: 48px;
    font-size: 16px;  /* iOS自動ズーム防止 */
  }
}
```

### 6.2 ジェスチャー対応
- **スワイプ**: リスト項目の削除・アクション表示
- **長押し**: コンテキストメニュー表示
- **ピンチズーム**: テーブル・詳細情報の拡大表示
- **プルツーリフレッシュ**: データ更新

### 6.3 キーボード・マウス対応（PC）
- **Tab**: フォーカス移動
- **Enter**: 決定・実行
- **Esc**: キャンセル・閉じる
- **Ctrl+F**: 検索
- **Ctrl+N**: 新規作成

---

## 7. パフォーマンス最適化

### 7.1 画像・アセット最適化
```css
/* デバイス別画像読み込み */
.company-logo {
  background-image: url('logo-small.webp');
}

@media (min-width: 768px) {
  .company-logo {
    background-image: url('logo-medium.webp');
  }
}

@media (min-width: 1200px) {
  .company-logo {
    background-image: url('logo-large.webp');
  }
}
```

### 7.2 レイジーローディング
- **テーブルデータ**: 仮想スクロール実装
- **画像**: Intersection Observer使用
- **大きなリスト**: ページネーション + 仮想化

### 7.3 データ転送量最適化
- **モバイル**: 必要最小限のデータ取得
- **画像**: WebP形式、適切なサイズ配信
- **フォント**: サブセット化、CSS font-display対応

---

## 8. ブラウザ対応

### 8.1 対応ブラウザ
| ブラウザ        | デスクトップ | モバイル |
|----------------|-------------|----------|
| Chrome         | 最新3版    | 最新3版  |
| Firefox        | 最新3版    | 最新3版  |
| Safari         | 最新3版    | 最新3版  |
| Edge           | 最新3版    | 最新3版  |

### 8.2 フォールバック対応
```css
/* CSS Grid フォールバック */
.grid-container {
  display: flex;          /* フォールバック */
  flex-wrap: wrap;
  display: grid;          /* Grid対応ブラウザ */
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

/* Flexbox Gap フォールバック */
.flex-container > * {
  margin-bottom: 1rem;    /* フォールバック */
}

.flex-container {
  gap: 1rem;              /* Gap対応ブラウザ */
}
```

---

## 9. アクセシビリティ対応

### 9.1 WCAG 2.1 AA準拠
- **コントラスト比**: 4.5:1以上
- **フォーカス表示**: 明確なフォーカスリング
- **キーボードナビゲーション**: 全機能キーボード操作可能
- **スクリーンリーダー**: ARIAラベル適切配置

### 9.2 フォントサイズ調整
```css
/* ユーザー設定に応じたフォントサイズ */
html {
  font-size: 16px;       /* ベースサイズ */
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
  }
}

@media (prefers-contrast: high) {
  .card {
    border: 2px solid #000;
    background: #fff;
  }
}
```

---

## 10. 実装チェックリスト

### 10.1 デスクトップ対応
- [ ] サイドナビゲーション常時表示
- [ ] データテーブル横スクロール対応
- [ ] マウスホバー効果実装
- [ ] キーボードショートカット対応
- [ ] 複数ウィンドウ・タブ対応

### 10.2 タブレット対応
- [ ] サイドナビオーバーレイ実装
- [ ] タッチスクロール最適化
- [ ] 2カラム→1カラムレイアウト変更
- [ ] フォームタッチ最適化

### 10.3 スマートフォン対応
- [ ] ハンバーガーメニュー実装
- [ ] ボトムナビゲーション実装
- [ ] カード形式レイアウト
- [ ] プルツーリフレッシュ実装
- [ ] タッチジェスチャー対応

### 10.4 共通対応
- [ ] レスポンシブ画像実装
- [ ] パフォーマンス最適化
- [ ] アクセシビリティ対応
- [ ] ブラウザ互換性確認
- [ ] 実機テスト実施

---

**レスポンシブデザイン指針完了**  
**対象デバイス**: デスクトップ・タブレット・スマートフォン  
**アプローチ**: PC優先、段階的機能制限方式