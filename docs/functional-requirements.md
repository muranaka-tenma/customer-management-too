# 機能要件定義書
## 顧客管理ツール（BtoB CRM）

**文書バージョン**: 1.0  
**作成日**: 2025-01-27  
**最終更新**: 2025-01-27  

---

## 1. システム概要

本システムは、BtoB営業活動を支援する包括的な顧客管理ツール（CRM）です。Gmail連携による自動メール取得、AI支援機能、包括的な営業プロセス管理を提供します。

---

## 2. 機能要件

### 2.1 認証・ユーザー管理機能

#### 2.1.1 基本認証
- **FR-001**: ユーザー登録機能（メール、パスワード、氏名）
- **FR-002**: ログイン機能（メール・パスワード認証）
- **FR-003**: ログアウト機能
- **FR-004**: パスワードリセット機能

#### 2.1.2 Google OAuth連携
- **FR-005**: Google OAuth2による認証
- **FR-006**: Gmail APIアクセストークン管理
- **FR-007**: アクセストークン自動更新機能

---

### 2.2 企業・担当者管理機能

#### 2.2.1 企業情報管理
- **FR-008**: 企業基本情報登録（会社名、業種、従業員数、URL、住所）
- **FR-009**: 企業分類管理（企業規模: STARTUP/SMALL/MEDIUM/LARGE/ENTERPRISE）
- **FR-010**: 企業ステータス管理（見込み客/アクティブ/非アクティブ/解約/ブラックリスト）
- **FR-011**: 企業タグ機能（自由タグ付け）
- **FR-012**: 自社担当者アサイン機能
- **FR-013**: 取引開始日・売上予測額管理
- **FR-014**: 企業メモ・ノート機能

#### 2.2.2 担当者情報管理
- **FR-015**: 担当者基本情報管理（氏名、役職、部署、連絡先）
- **FR-016**: メイン担当者フラグ設定
- **FR-017**: 決裁者フラグ設定
- **FR-018**: 希望コミュニケーション手段設定
- **FR-019**: 関係性レベル管理（COLD/WARM/HOT/CHAMPION）
- **FR-020**: 最終連絡日自動記録

---

### 2.3 Gmail連携・メール管理機能

#### 2.3.1 メール同期機能
- **FR-021**: Gmail自動同期機能
- **FR-022**: 特定顧客メール絞り込み同期
- **FR-023**: 期間指定同期
- **FR-024**: リアルタイム新着メール取得

#### 2.3.2 メールスレッド管理
- **FR-025**: メールスレッド表示機能
- **FR-026**: スレッド優先度設定（LOW/MEDIUM/HIGH/URGENT）
- **FR-027**: スレッドステータス管理（アクティブ/返信待ち/相手返信待ち/完了/アーカイブ）
- **FR-028**: スレッド参加者一覧表示
- **FR-029**: スレッドタグ機能
- **FR-030**: 未読・既読管理

#### 2.3.3 添付ファイル管理
- **FR-031**: 添付ファイル自動ダウンロード
- **FR-032**: ファイルサムネイル生成
- **FR-033**: PDFテキスト抽出機能
- **FR-034**: 添付ファイルタグ機能
- **FR-035**: ファイル検索機能

---

### 2.4 営業プロセス管理機能

#### 2.4.1 商材マスタ管理
- **FR-036**: 商材情報登録（商材名、カテゴリ、価格、課金サイクル）
- **FR-037**: 商材機能一覧管理
- **FR-038**: 商材有効/無効管理
- **FR-039**: 商材検索・フィルタ機能

#### 2.4.2 提案管理
- **FR-040**: 提案作成機能（タイトル、説明、商材選択、金額）
- **FR-041**: 提案ステータス管理（下書き/送信済み/閲覧済み/検討中/受諾/拒否/期限切れ）
- **FR-042**: 提案結果記録（拒否理由、ノート）
- **FR-043**: 提案履歴表示
- **FR-044**: 提案期限アラート

#### 2.4.3 契約管理
- **FR-045**: 契約情報登録（契約名、契約タイプ、期間、金額）
- **FR-046**: 契約ステータス管理（下書き/提案済み/交渉中/契約済み/アクティブ/期限切れ/キャンセル）
- **FR-047**: 自動更新設定
- **FR-048**: 契約期限アラート
- **FR-049**: 契約金額・課金サイクル管理

---

### 2.5 TODO・タスク管理機能

#### 2.5.1 TODO管理
- **FR-050**: TODO作成機能（タイトル、説明、期限、優先度）
- **FR-051**: TODO優先度設定（LOW/MEDIUM/HIGH/URGENT）
- **FR-052**: TODOステータス管理（TODO/進行中/完了/キャンセル）
- **FR-053**: 担当者アサイン機能
- **FR-054**: 予想工数・実工数記録
- **FR-055**: TODO期限アラート

#### 2.5.2 AI自動TODO抽出
- **FR-056**: メール内容からTODO自動抽出
- **FR-057**: AI提案TODO確認・承認機能
- **FR-058**: TODO抽出元メッセージ関連付け
- **FR-059**: 抽出精度学習機能

---

### 2.6 AI支援機能

#### 2.6.1 返信支援機能
- **FR-060**: AI返信文章生成
- **FR-061**: 返信テンプレート管理
- **FR-062**: 返信トーン設定（友好的/プロフェッショナル/カジュアル）
- **FR-063**: 返信下書き保存機能
- **FR-064**: 返信予約送信機能

#### 2.6.2 メール分析機能
- **FR-065**: メール感情分析（ポジティブ/ニュートラル/ネガティブ）
- **FR-066**: 緊急度自動判定
- **FR-067**: キーワード・トピック抽出
- **FR-068**: 顧客状況変化検知

---

### 2.7 アラート・通知機能

#### 2.7.1 アラート管理
- **FR-069**: 長期未連絡アラート
- **FR-070**: 返信待ちアラート
- **FR-071**: TODO期限切れアラート
- **FR-072**: 重要メールアラート
- **FR-073**: 添付ファイル要確認アラート
- **FR-074**: アラート重要度設定（INFO/WARNING/ERROR/CRITICAL）

---

### 2.8 統計・分析機能

#### 2.8.1 顧客メトリクス
- **FR-075**: 顧客別メール統計（送信数/受信数/返信率）
- **FR-076**: 平均返信時間計算
- **FR-077**: 顧客活動履歴表示
- **FR-078**: 工数統計（TODO実工数集計）
- **FR-079**: アクティブスレッド数表示

#### 2.8.2 営業統計
- **FR-080**: 提案成功率統計
- **FR-081**: 契約金額統計
- **FR-082**: 営業パフォーマンス分析
- **FR-083**: 売上予測レポート

---

### 2.9 カスタムフィールド機能

#### 2.9.1 カスタムフィールド管理
- **FR-084**: カスタムフィールド作成（テキスト/数値/日付/選択肢等）
- **FR-085**: エンティティ別カスタムフィールド（企業/担当者/商材/契約/提案）
- **FR-086**: フィールドバリデーション設定
- **FR-087**: カスタムフィールド権限管理
- **FR-088**: カスタムフィールド検索・フィルタ

---

### 2.10 データインポート・エクスポート機能

#### 2.10.1 インポート機能
- **FR-089**: CSV形式データインポート
- **FR-090**: フィールドマッピング設定
- **FR-091**: インポートプレビュー機能
- **FR-092**: インポート結果レポート（成功/失敗件数）
- **FR-093**: インポートエラー詳細表示

#### 2.10.2 エクスポート機能
- **FR-094**: 顧客データCSVエクスポート
- **FR-095**: フィルタ条件指定エクスポート
- **FR-096**: エクスポート形式選択（CSV/Excel）

---

### 2.11 検索・フィルタ機能

#### 2.11.1 全文検索
- **FR-097**: 統合検索機能（顧客/メール/TODO横断検索）
- **FR-098**: 高度検索フィルタ
- **FR-099**: 検索結果ハイライト表示
- **FR-100**: 保存済み検索条件

#### 2.11.2 フィルタ機能
- **FR-101**: 顧客ステータス別フィルタ
- **FR-102**: 期間指定フィルタ
- **FR-103**: 担当者別フィルタ
- **FR-104**: カスタムフィールドフィルタ

---

### 2.12 ユーザー権限・セキュリティ機能

#### 2.12.1 権限管理
- **FR-105**: ユーザー役割管理（ADMIN/MANAGER/SALES/VIEWER）
- **FR-106**: 機能別アクセス制御
- **FR-107**: データレベルアクセス制御
- **FR-108**: 操作ログ記録

---

## 3. 優先度分類

### 3.1 必須機能（Phase 1）
- 基本認証機能（FR-001〜004）
- Google OAuth連携（FR-005〜007）
- 基本的な顧客管理（FR-008〜020）
- Gmail同期（FR-021〜024）
- 基本的なメール表示（FR-025〜030）

### 3.2 重要機能（Phase 2）
- 営業プロセス管理（FR-036〜049）
- TODO管理（FR-050〜055）
- 基本的なアラート（FR-069〜074）
- 基本統計（FR-075〜079）

### 3.3 拡張機能（Phase 3）
- AI支援機能（FR-056〜068）
- 高度な分析（FR-080〜083）
- カスタムフィールド（FR-084〜088）
- インポート・エクスポート（FR-089〜096）

### 3.4 高度機能（Phase 4）
- 高度な検索（FR-097〜104）
- 権限管理（FR-105〜108）

---

## 4. 機能間の依存関係

### 4.1 前提条件
- Gmail連携機能は認証機能に依存
- AI機能はメール管理機能に依存
- 統計機能は全ての基本機能に依存

### 4.2 データ依存関係
- 担当者情報は企業情報に依存
- メールスレッドは顧客情報に依存
- TODOは顧客・メールスレッドに依存
- 契約は企業・商材情報に依存

---

**文書終了**