# 顧客管理ツール 要件定義書 v2.0
## 管理特化型CRMシステム

**文書バージョン**: 2.0  
**作成日**: 2025-01-27  
**システム目的**: 管理工数削減・メール工数削減特化型顧客管理ツール

---

## 1. システム概要

### 1.1 目的
- **管理工数削減**: Excel管理からの脱却、情報一元化による効率化
- **メール工数削減**: TODO自動抽出による対応漏れ防止・作業効率化
- **情報の完全管理**: 過去〜現在のすべての顧客情報・対応履歴を集約

### 1.2 システム規模
- **想定ユーザー数**: 10名（営業チーム + 事務チーム）
- **管理企業数**: 最大1,000件
- **メールデータ**: 大容量（ユーザー×担当企業×履歴蓄積）
- **システム管理者**: 1名（兼任）

---

## 2. 機能要件

### 2.1 認証・ユーザー管理機能

#### 2.1.1 基本認証
- **FR-001**: ユーザー登録・ログイン機能
- **FR-002**: Google OAuth2認証（Gmail連携必須）
- **FR-003**: 多要素認証対応
- **FR-004**: ユーザー別権限管理（管理者/一般ユーザー）

---

### 2.2 企業情報管理機能

#### 2.2.1 基本企業情報
- **FR-005**: 企業基本情報登録（会社名、業種、連絡先、住所）
- **FR-006**: **完全自由項目機能**（項目名・項目タイプを自由設定）
- **FR-007**: 項目追加・変更・削除（運用後でも自由に変更可能）
- **FR-008**: 担当者アサイン機能（複数担当者対応）
- **FR-009**: 企業ステータス管理（見込み客/既存顧客/休眠等）

#### 2.2.2 検索・表示機能
- **FR-010**: 企業名・項目での部分一致検索
- **FR-011**: 複数条件でのフィルタ機能
- **FR-012**: 担当者別企業一覧表示
- **FR-013**: 企業詳細画面（情報・履歴・商材状況を一画面表示）

---

### 2.3 商材管理機能

#### 2.3.1 商材マスタ管理
- **FR-014**: 商材情報登録（商材名、カテゴリ、価格等）
- **FR-015**: **商材項目自由設定**（商材固有の管理項目を自由追加）
- **FR-016**: 商材マスタ編集・削除機能

#### 2.3.2 企業別商材状況管理
- **FR-017**: 企業別商材導入状況表示（何がいつから導入されているか）
- **FR-018**: **提案フラグ管理**（提案済み/未提案/検討中の簡単管理）
- **FR-019**: 契約期間・更新日管理
- **FR-020**: 商材別導入企業一覧

---

### 2.4 Gmail連携・対応ログ機能

#### 2.4.1 Gmail自動同期
- **FR-021**: **ユーザー別Gmail自動同期**（各担当者のGmail個別連携）
- **FR-022**: 企業メールアドレス自動関連付け
- **FR-023**: リアルタイム新着メール取得
- **FR-024**: 大容量メールデータ高効率保存

#### 2.4.2 対応ログ・履歴管理
- **FR-025**: 企業別メール履歴表示（時系列順）
- **FR-026**: メール内容全文検索
- **FR-027**: 添付ファイル管理・表示
- **FR-028**: 対応担当者別履歴表示
- **FR-029**: **完全な対応ログ蓄積**（過去のすべての対応を保持）

#### 2.4.3 メール表示・管理
- **FR-030**: スレッド形式メール表示
- **FR-031**: 未読・既読管理
- **FR-032**: メールタグ・ラベル機能
- **FR-033**: 重要メール優先表示

---

### 2.5 TODO抽出・管理機能

#### 2.5.1 AI TODO抽出
- **FR-034**: **メール内容からTODO自動抽出**（AIによる解析）
- **FR-035**: 抽出TODO確認・承認機能
- **FR-036**: TODO編集・手動追加機能
- **FR-037**: 抽出元メール関連付け

#### 2.5.2 TODO管理
- **FR-038**: TODO一覧表示（担当者別・企業別・期限別）
- **FR-039**: TODO優先度設定
- **FR-040**: TODO完了・未完了管理
- **FR-041**: TODO期限アラート機能
- **FR-042**: TODO実行履歴記録

---

### 2.6 データインポート・エクスポート機能

#### 2.6.1 柔軟インポート機能
- **FR-043**: **Excel任意フォーマット対応**（各ユーザーの既存フォーマット取込）
- **FR-044**: **インポート時項目マッピング**（Excel項目→システム項目の柔軟設定）
- **FR-045**: 企業情報一括インポート
- **FR-046**: 商材情報一括インポート
- **FR-047**: インポートプレビュー・確認機能
- **FR-048**: インポート結果レポート（成功/失敗詳細）

#### 2.6.2 エクスポート機能
- **FR-049**: 企業情報CSV/Excelエクスポート
- **FR-050**: フィルタ条件指定エクスポート
- **FR-051**: 対応履歴エクスポート

---

### 2.7 システム管理機能

#### 2.7.1 ユーザー管理
- **FR-052**: ユーザー登録・削除・権限変更
- **FR-053**: アクセスログ管理・確認
- **FR-054**: 操作履歴追跡

#### 2.7.2 システム監視
- **FR-055**: **システム状況監視ダッシュボード**
- **FR-056**: 障害検知・アラート機能
- **FR-057**: パフォーマンス監視
- **FR-058**: 容量・使用状況監視

---

## 3. 非機能要件

### 3.1 パフォーマンス要件

#### 3.1.1 応答時間
- **NFR-001**: ページ表示時間 ≤ 2秒
- **NFR-002**: 検索結果表示 ≤ 2秒（1,000件対象）
- **NFR-003**: Gmail同期 ≤ 30秒（差分同期）
- **NFR-004**: TODO抽出 ≤ 10秒（1メール）

#### 3.1.2 同時利用性能
- **NFR-005**: 同時ユーザー 10名対応
- **NFR-006**: 大容量メールデータ高速検索対応

---

### 3.2 可用性・信頼性要件

#### 3.2.1 稼働率・復旧
- **NFR-007**: システム稼働率 99.0%以上
- **NFR-008**: **可及的速やかな障害復旧**（目標: 30分以内）
- **NFR-009**: **自動復旧機能**（可能な限り自走）
- **NFR-010**: 障害検知 ≤ 5分

#### 3.2.2 データ保護
- **NFR-011**: **リアルタイムバックアップ**（変更毎の自動バックアップ）
- **NFR-012**: バックアップ保存期間 90日
- **NFR-013**: **ワンクリック復旧機能**
- **NFR-014**: データ損失許容時間 ≤ 1時間

---

### 3.3 セキュリティ要件（最高レベル）

#### 3.3.1 認証・アクセス制御
- **NFR-015**: **多要素認証必須**
- **NFR-016**: 強力なパスワードポリシー
- **NFR-017**: セッション管理・自動タイムアウト
- **NFR-018**: 役割ベースアクセス制御（RBAC）

#### 3.3.2 データ暗号化
- **NFR-019**: **通信暗号化**（TLS 1.3以上）
- **NFR-020**: **データベース暗号化**（AES-256）
- **NFR-021**: Gmail認証トークン暗号化保存
- **NFR-022**: ログファイル機密情報マスキング

#### 3.3.3 不正アクセス対策
- **NFR-023**: **不正アクセス検知・自動ブロック**
- **NFR-024**: IPアドレス制限機能
- **NFR-025**: 異常ログイン検知・アラート
- **NFR-026**: **全操作ログ記録**（監査証跡）

---

### 3.4 運用・保守要件

#### 3.4.1 自走型運用
- **NFR-027**: **自動監視・自動復旧**（人的介入最小化）
- **NFR-028**: システム健全性自動チェック
- **NFR-029**: 定期メンテナンス自動化
- **NFR-030**: 障害予兆検知・事前対応

#### 3.4.2 管理・監視
- **NFR-031**: **管理者ダッシュボード**（システム状況一覧）
- **NFR-032**: アラート通知機能（メール・画面）
- **NFR-033**: ログ管理・分析機能
- **NFR-034**: 容量管理・自動クリーンアップ

---

### 3.5 拡張性・柔軟性要件

#### 3.5.1 データ構造柔軟性
- **NFR-035**: **完全動的項目対応**（後からの項目追加・変更）
- **NFR-036**: スキーマ変更のダウンタイム最小化
- **NFR-037**: 大容量データ対応（メール履歴蓄積）

---

## 4. 実装優先度・フェーズ計画

### 4.1 Phase 1: システム基盤構築（6週間）
**目標**: 安全で自走可能な基盤システム

#### 必須機能
- 認証システム（FR-001〜004）
- 基本企業情報管理（FR-005〜009）
- Gmail連携基盤（FR-021〜024）
- セキュリティ基盤（NFR-015〜026）
- 監視・バックアップ基盤（NFR-011〜014, NFR-027〜034）

#### 成果物
- 安全にログインして企業情報を登録できる
- Gmail自動同期が動作する
- 自動バックアップ・監視が機能する

### 4.2 Phase 2: コア管理機能（4週間）
**目標**: 日常の顧客管理業務の効率化

#### 実装機能
- 対応ログ表示（FR-025〜033）
- TODO抽出・管理（FR-034〜042）
- 商材管理（FR-014〜020）
- 基本検索機能（FR-010〜013）

#### 成果物
- メール履歴の確認ができる
- TODOが自動抽出される
- 商材導入状況が管理できる

### 4.3 Phase 3: 運用効率化機能（3週間）
**目標**: Excel移行とシステム運用効率化

#### 実装機能
- 柔軟インポート（FR-043〜048）
- エクスポート機能（FR-049〜051）
- システム管理機能（FR-052〜058）

#### 成果物
- 既存Excelデータを一括移行できる
- 運用管理が自動化される
- 完全に実用可能なシステム

---

## 5. 成功指標（KPI）

### 5.1 業務効率化指標
- **管理工数削減**: Excel管理時間 → 50%削減目標
- **メール対応効率**: TODO漏れ → 90%削減目標
- **情報検索時間**: 顧客情報検索 → 80%短縮目標

### 5.2 システム品質指標
- **稼働率**: 99.0%以上維持
- **復旧時間**: 障害発生時30分以内復旧率 90%以上
- **セキュリティ**: 不正アクセス0件維持

### 5.3 ユーザー満足度指標
- **システム利用率**: 全ユーザー90%以上の日次利用
- **機能利用率**: 主要機能80%以上の週次利用
- **ユーザー満足度**: 5段階評価で平均4.0以上

---

## 6. リスク・制約事項

### 6.1 技術リスク
- **Gmail API制限**: 大容量メール同期時のAPI上限
- **AI精度**: TODO抽出精度のばらつき
- **データ容量**: 長期運用時の容量増大

### 6.2 運用リスク
- **セキュリティ**: 顧客データ漏洩リスク
- **可用性**: 単一管理者による運用リスク
- **データ移行**: Excel→システム移行時のデータ品質

### 6.3 対策
- Gmail API制限への段階的同期実装
- AI精度向上のための学習機能
- 自動容量管理・アーカイブ機能
- 多層セキュリティ・自動監視実装
- 詳細な運用手順書・復旧手順書作成

---

**要件定義書 v2.0 完了**  
**総機能要件**: 58件  
**総非機能要件**: 37件  
**実装期間**: 13週間（3フェーズ）